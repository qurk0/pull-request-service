# Проект: тестовое задание Avito Tech 2025 Autumn

Данный проект является реализацией сервиса для управления PullRequest'ами.

ВАЖНОЕ УТОЧНЕНИЕ: Это первая версия от 15.11.2025 22:05. Я очень устал, так как сижу над проектом с 9 утра, поэтому я очень хочу спатки. Важно сказать, что сейчас готова первая версия сервиса. Завтра, 16.11.2025, я сделаю Docker-compose, чтобы можно было поднимать всё одним docker compose up -d, в котором будут миграции, все нужные зависимости, а так же запущены сервис и БД, после чего приступлю к написанию тестов и тестированием сервиса на корректность работы. Потом приступлю к доп. заданиям по типу сбора статистик, нагрузочному тестированию, чем бы оно ни было, а заодно прокину логгер.

## Стек технологий, которые использованы в данном проекте:
1. **Язык программирования:** Go
- - Библиотеки: cleanenv, fiber, jackx/pgx/v5
2. **База данных:** PostgreSQL (+ миграции с помощью Goose)
3. **Контейнеризация с помощью Docker:** на момент создания коммита нет ничего, кроме директории Docker. Потом напишу 3 файла: докер компоуз для развертывания всего проекта и 2 докерфайла для сборки сервиса и мигратора

## Принятые решения в рамках разработки проекта
1. Переменная LOGLEVEL в ENV-переменных, по умолчанию будет стоять LevelInfo, если вдруг захочется взять другой уровень логирования - в docker-compose.yml меняем LOGLEVEL на уровень: 'warn', 'error', 'debug' (пока что только строчные литеры работают, в дальнейшем может будет свободный регистр в переменных окружения и буду всё к lowerCase приводить, пока не до этого)

2. При создании команды если встречаем ID существующих членов команды - обновляем данные по ним: меняем username (возможно сделаю unique и не буду менять), team_name и is_active.

3. По документации есть конфликт:
Было:
  /pullRequest/reassign:
    post:
      tags: [PullRequests]
      summary: Переназначить конкретного ревьювера на другого из его команды
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [ pull_request_id, old_user_id ]
              properties:
                pull_request_id: { type: string }
                old_user_id: { type: string }
            example:
              pull_request_id: pr-1001
              old_reviewer_id: u2
У нас required-полем является old_user_id, а в example приходит old_reviewer_id. Решил оставить old_reviewer_id, считаю это логически более правильным, надеюсь не убьёте за это :D

4. Я не совсем понимаю, что такое нагрузочное тестирование, поэтому скорее всего я напишу небольшую аппку, которая отправит штук 200 запросов на разные эндпоинты в несколько горутин для массовости. Если сервис выдержит нужные требования - это будет идеально. Ещё мне что-то говорили про Яндекс Танк, но я в вар тандере не силён.